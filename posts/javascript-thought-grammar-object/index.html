<!DOCTYPE html>
<html lang="ch-cn">

<head>
    <meta charset="utf-8">
    <title>Javascript: Thought, Grammar and Object - BeiHai</title>
    <meta name="generator" content="Hugo 0.57.2" /> <link rel="stylesheet" href="https://beihai-chang.github.io/css/main.min.dc3e5cf53137ac14a84c79884440d085ca62ebe9e7a1a25a9bae67b470725590.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/monokai.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
    
       <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Josefin Sans" type="text/css" media="all" />
     
       <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Love Ya Like A Sister" type="text/css" media="all" />
     
       <link rel="stylesheet" href="//fonts.googleapis.com/css?family=IM Fell DW Pica" type="text/css" media="all" />
     
       <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato" type="text/css" media="all" />
     
       <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif TC" type="text/css" media="all" />
     
    <style>
        html {
            font-family: 'Josefin Sans', sans-serif;
        }
    </style>
    
</head>

<body>
    <div class="wrapper">
        <nav class="navbar">
            
            <progress class="content_progress" max="0" value="0"></progress> 
            <div class="container">
                <div class="navbar-header header-back2home-logo">
                    <span class="logo_mark">>$</span>
                    <a href="https://beihai-chang.github.io">
                        <span class="logo_text">cd /home/</span>
                        <span class="logo_cursor"></span>
                    </a>
                </div>
                <div class="navbar-right">
                    
                    <span class="menu">
                        
                        <a class="menu-item"
                            href="/categories/" title="">Categories</a>
                        
                        <a class="menu-item"
                            href="/tags/" title="">Tags</a>
                        
                        <a class="menu-item"
                            href="/about/" title="">About</a>
                        
                    </span>
                </div>
            </div>
        </nav>
        <main>
            <div class="container">

<article class="post-wrap">
    <header class="post-header">
        <h1 class="post-title">Javascript: Thought, Grammar and Object</h1>
        <div class="post-meta">
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
                Aug 2, 2020
            </div>
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-book">
  <title>book</title>
  <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
</svg>
                3364 words
            </div>
            
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-folder">
  <title>folder</title>
  <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
</svg>
                
                
                
                <a href="https://beihai-chang.github.io/categories/%E7%AC%94%E8%AE%B0/"> 笔记</a>
                
                
            </div>
        </div>
    </header>

    <div class="post-content">
        

<h2 id="javascript的语言思想">Javascript的语言思想</h2>

<h3 id="亮点">亮点</h3>

<h4 id="函数">函数</h4>

<p>Javascript中的函数是具有<strong>词法作用域</strong>的<strong>顶级对象</strong>。</p>

<blockquote>
<p>JavaScript’s functions are first class objects with (mostly) lexical scoping.</p>
</blockquote>

<p>Javascript是第一个主流的Lambda语言。Lambda演算是一套用于研究函数定义，应用和递归的形式系统，对<strong>函数式编程</strong>有重大影响。</p>

<h4 id="弱类型">弱类型</h4>

<p>Javascript是弱类型（loose typing）语言，相比于强类型语言更加自由。</p>

<h4 id="对象的表示">对象的表示</h4>

<p>Javascript有一套强大的<strong>对象字面表示法</strong>（object literal notation），只需要像JSON一样列出对象的组成部分即可。</p>

<h4 id="继承">继承</h4>

<p>Javascript虽然是面向对象语言，但是<strong>没有</strong>类（class），一个对象可以直接继承另一个对象，这叫做<strong>原型继承</strong>（prototypal inheritance）。</p>

<p>传统的面向对象模式在Javascript中不适用。</p>

<h3 id="缺陷">缺陷</h3>

<p>Javascript依赖于全局变量。这使得所有编译单元的顶层变量都纠缠在同一个命名空间里。</p>

<h2 id="为什么选择javascript">为什么选择Javascript</h2>

<ol>
<li>Web开发离不开Javascript</li>
<li>尽管有缺陷，Javascript仍然是卓越的语言，轻量，富有表现力</li>
</ol>

<hr />

<h2 id="语法">语法</h2>

<h3 id="注释">注释</h3>

<pre><code class="language-javascript">// 行注释

/*
	块注释
*/
</code></pre>

<p>好习惯是<strong>使用行注释</strong>，避免使用块注释，防止与正则表达式引起冲突。</p>

<pre><code class="language-javascript">// 语法错误

/*
	var rm_a = /a*/.match(s)
*/
</code></pre>

<h3 id="数字">数字</h3>

<p>Javascript中的数字只有一种类型：64位的浮点数。</p>

<p>一些特殊值：</p>

<ul>
<li><code>NaN</code>：不正常的运算结果。NaN不等于任何数，包括它自己</li>
<li><code>Infinity</code>：任何大于1.79769313486231570e+308的数</li>
</ul>

<h3 id="字符串">字符串</h3>

<p>Javascript没有字符类型。</p>

<p>字面量可以被包在一对单引号或双引号中。</p>

<p>Javascript中字符的长度是16位。</p>

<p>字符串不可变（immutable），但是可以通过<code>+</code>号把字符串拼接成新字符串。</p>

<pre><code class="language-javascript">// true
'c' + 'a' + 't' === 'cat'
</code></pre>

<h3 id="语句">语句</h3>

<p>一个<strong>编译单元</strong>由一系列可执行的语句组成。</p>

<p>在Web浏览器中，每个<code>&lt;script&gt;</code>标签提供一个编译单元。</p>

<p>Javascript没有连接器，所有的编译单元都被置于一个公共的全局命名空间。</p>

<p>在函数内部，<code>var</code>语句定义函数的私有变量。</p>

<p>用一对花括号包裹的复数语句叫做代码块（block）。Javascript的代码块<strong>不会</strong>创建新的作用域，因此变量必须被定义在函数的头部。</p>

<p>Javascript中的*假*（falsy）值：</p>

<ul>
<li><code>false</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li>空字符串</li>
<li>数字<code>0</code></li>
<li>数字<code>NaN</code></li>
</ul>

<p>Javascript中for语句的两种形式：</p>

<ol>
<li>类似于C语言和Java，由初始化从句（initialization），条件从句（condition）和增量从句（increment）组成的循环控制语句</li>
<li>for-in语句，枚举一个<strong>对象</strong>的所有<strong>属性</strong></li>
</ol>

<p>for-in语句示例，检测<code>obj</code>对象的所有属性是其自身的成员还是来自原型链：</p>

<pre><code class="language-javascript">for(myvar in obj) {
    if(obj.hasOwnProperty(myvar)) {
        ...
    }
}
</code></pre>

<p>try-catch语句，try语句块捕捉发生的异常，catch语句定义一个新的变量来接收这个异常。</p>

<p>可以使用throw语句人为抛出异常。其表达式为一个<strong>对象字面量</strong>，包含一个name属性和一个message属性。</p>

<p>return语句可以让函数提前返回，如果没有指定返回值，则默认返回值为<code>undefined</code>。</p>

<h3 id="字面量">字面量</h3>

<p>对象字面量（object literals）：一种创建新对象的便捷方法。</p>

<p>属性名：标识符或者字符串</p>

<p>属性值：表达式</p>

<p>属性名被当作字面量而非变量名，因此在编译时才知道对象的属性名是什么。</p>

<h3 id="函数-1">函数</h3>

<p>函数字面量定义了函数值，函数名是可选的，用来递归地调用自身。</p>

<p>函数可以指定一个参数表，在调用时由实参（argument）初始化。</p>

<p>函数体包括变量定义和语句。</p>

<h2 id="对象">对象</h2>

<p>Javascript中的简单类型：数字，字符串，布尔值，<code>null</code>和<code>undefined</code></p>

<p>简单类型之外的都是对象（object），包括数组，函数，正则表达式等等</p>

<p>Javascript的对象是一种<strong>可变</strong>（mutable）的<strong>keyed collection</strong></p>

<p>对象是属性的容器，一个属性拥有属性名和属性值。属性名可以是任何字符串，甚至是空字符串。属性值可以是除<code>undefined</code>以外的任何值。</p>

<h3 id="对象字面量">对象字面量</h3>

<p>对象字面量是由一对花括号包裹的0条或多条属性名/属性值对：</p>

<pre><code class="language-javascript">var empty_object = {};

var stooge = {
    &quot;first-name&quot;: &quot;Jerome&quot;,
    &quot;last-name&quot;: &quot;Howard&quot;
};

// 如果属性名是合法的Javascript变量名, 则可以省略引号&quot;&quot;
// 比如上面的&quot;first-name&quot;如果为&quot;first_name&quot;可以直接写作first_name, &quot;first-name&quot;则不可
// 同时对象字面量可以嵌套
var flight = {
    airline: &quot;Oceanic&quot;,
    number: 815,
    departure: {
        IATA: &quot;SYD&quot;,
        time: &quot;2004-09-22 14:55&quot;,
        city: &quot;Sydney&quot;
    },
    arrival: {
        IATA: &quot;LAX&quot;,
        time: &quot;2004-09-23 10:42&quot;,
        city: &quot;Los Angeles&quot;
    }
};
</code></pre>

<h3 id="属性抽取">属性抽取</h3>

<p>抽取对象属性可以在对象名后使用<code>[]</code>运算符：</p>

<pre><code class="language-javascript">stooge['first-name'] // &quot;Jeorme&quot;
</code></pre>

<p>如果属性名是合法的Javascript变量名，则可以使用更简洁的<code>.</code>运算符</p>

<pre><code class="language-javascript">flight.departure.IATA // &quot;SYD&quot;
</code></pre>

<p>如果试图抽取不存在的属性，则会产生一个<code>undefined</code>值</p>

<p>我们可以用逻辑或<code>||</code>来为属性抽取设置默认值，如果要抽取的属性不存在，则用设置好的默认值来代替本该产生的<code>undefined</code>：</p>

<pre><code class="language-javascript">var middle = stooge['middle-name'] || &quot;(none)&quot;;
var status = flight.status || &quot;unknown&quot;;
</code></pre>

<p>如果我们试图从<code>undefined</code>中抽取属性，则会产生一个TypeError异常。为了避免这样的错误，可以运用逻辑与<code>&amp;&amp;</code>：</p>

<pre><code class="language-javascript">var status = flight.equipment &amp;&amp; flight.equipment.model;
</code></pre>

<p>这样一来，如果flight对象没有equipment属性，则程序不再执行<code>&amp;&amp;</code>后面的属性抽取操作。</p>

<h3 id="对象的更新">对象的更新</h3>

<p>可以通过赋值语句更新对象的属性，如果该属性已存在，则重新为它赋值；如果不存在，则向对象扩充新的属性名/属性值对。</p>

<pre><code class="language-javascript">// 修改已存在的属性值
stooge['first-name'] = 'Wade';

// 扩充新的属性
stooge['middle-name'] = 'Lester';
stooge.nickname = 'Curly';
flight.equipment = {
    model: 'Boeing 777'
};
</code></pre>

<h3 id="引用">引用</h3>

<p>Javascript的对象通过引用（reference）传递，而非复制（copy）</p>

<h3 id="原型">原型</h3>

<p>所有的Javascript对象都连接着一个原型对象（prototype object），对象可以从原型对象中继承属性。</p>

<p>所有通过对象字面量创建的对象都默认连接着一个Javascript语言的原生对象<code>Object.prototype</code>。</p>

<p>当创建新对象时，可以为其指定一个原型对象。Javascript对这一机制的设计较为复杂，但我们可以为<code>Object</code>添加一个<code>.create</code>方法来简化这一过程：</p>

<pre><code class="language-javascript">if (typeof Object.beget !== 'function') {
	Object.create = function(o) {
        var F = function() {};
        F.prototype = o;
        return new F();
    };
}
var another_stooge = Object.create(stooge);
</code></pre>

<p>更新一个对象时，不会影响到对象的原型。</p>

<p>原型连接只有在<strong>检索</strong>中被用到：当我们常识获取对象的某个属性，但该对象没有该属性名，那么Javascript会常识到原型对象中获取该属性，如果仍然没有，则到原型对象的原型对象中寻找，以此类推直到<code>Object.prototype</code>。如果整个<strong>原型链</strong>都无法搜索到该属性值，则产生<code>undefined</code>。上述的过程叫做<strong>委托</strong>（delegation）。</p>

<p>原型是一种<strong>动态</strong>的关系，如果我们向一个对象扩充了属性，那么对所有<strong>以该对象为原型的对象</strong>都是可见的：</p>

<pre><code class="language-javascript">stooge.profession = 'actor';
another_stooge.profession // 'actor'
</code></pre>

<h3 id="反射">反射</h3>

<p>通过<code>typeof</code>运算符我们可以查询对象属性的类型：</p>

<pre><code class="language-javascript">typeof flight.number // 'number'
typeof flight.status // 'string'
typeof flight.arrival // 'object'
typeof flight.manifest // 'undefined'
</code></pre>

<p>可以通过这个方法来检索并确定对象的属性，但是原型链中的任何属性都会产生值：</p>

<pre><code class="language-javascript">typeof flight.toString // 'function'
typeof flight.constructor // 'function'
</code></pre>

<p>我们可以让程序检查并丢掉不需要的属性，比如函数；也可以使用<code>hasOwnProperty</code>方法，如果该属性为对象独有，则返回<code>true</code>，<code>hasOwnProperty</code>方法不会检查原型链：</p>

<pre><code class="language-javascript">flight.hasOwnProperty('number') // true
flight.hasOwnProperty('constructor') // false
</code></pre>

<h3 id="枚举">枚举</h3>

<p>前面提到，可以用for in语句来遍历枚举一个对象中的所有元素。但是for in语句会列出函数与原型中的属性，而这是我们不想要的。这时候我们可以用<code>typeof</code>运算符或者<code>hasOwnProperty</code>方法加以排除：</p>

<pre><code class="language-javascript">var name;
for(name in another_stooge) {
    if(typeof another_stooge[name] !== 'function')
        document.writeln(name + &quot;: &quot; + another_stooge[name]);
}
</code></pre>

<p>属性名出现的顺序是不确定的，如果要以确定的顺序来枚举对象中的元素，不妨以数组的形式将属性名以我们需要的顺序列出来：</p>

<pre><code class="language-javascript">var i;
var properties = [
    'first-name',
    'middle-name',
    'last-name',
    'nickname'
];
for(i = 0; i &lt; properties.length; i += 1)
    document.writeln(properties[i] + ': ' + another_stooge[properties[i]]);
</code></pre>

<h3 id="删除">删除</h3>

<p>可以使用<code>delete</code>运算符来删除对象中的属性。注意，删除<strong>不会</strong>影响到原型对象，删除对象属性可能会让被覆盖的原型对象属性显现出来：</p>

<pre><code class="language-javascript">another_stooge.nickname = 'Moe';
document.writeln(another_stooge.nickname); // 'Moe'
delete another_stooge.nickname;
document.writeln(another_stooge.nickname); // 'Curly'
</code></pre>

<h3 id="减少全局变量污染">减少全局变量污染</h3>

<p>前面说过，全局变量是Javascript的一大设计缺陷，我们可以通过最小化使用全局变量来避免一系列纠缠不清的问题，比如，只创建唯一的一个全局变量：</p>

<pre><code class="language-javascript">var MYAPP {};

MYAPP.stooge = {
    'first-name': 'Joe',
    'last-name': 'Howard'
};
MYAPP.flight = {
    airline: &quot;Oceanic&quot;,
	number: 815,
	departure: {
		IATA: &quot;SYD&quot;,
		time: &quot;2004-09-22 14:55&quot;,
		city: &quot;Sydney&quot;
	},
	arrival: {
		IATA: &quot;LAX&quot;,
		time: &quot;2004-09-23 10:42&quot;,
		city: &quot;Los Angeles&quot;
	}
};
</code></pre>

<p>这样一来我们降低了与其他应用，类库或组件发生冲突的可能性，也增强了程序的可读性。</p>

    </div>

    <div class="post-copyright">
        
        <p class="copyright-item">
            <span>Author:</span>
            <span>Beihai-Chang </span>
        </p>
        

        
        <p class="copyright-item">
            <span>Link:</span>
            <a href=https://beihai-chang.github.io/posts/javascript-thought-grammar-object/>https://beihai-chang.github.io/posts/javascript-thought-grammar-object/</a>
        </p>
        
        
        <p class="copyright-item lincese">
            本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
        </p>
        
    </div>

    <div class="post-tags">
        
        <section>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>Tag(s):
            
            <span class="tag"><a href="https://beihai-chang.github.io/tags/javascript/">
                    #Javascript</a></span>
            
        </section>
        
    </div>

</article>
</div>
</main>
<div class="copyright">
    
    <span itemprop="copyrightYear">2020 - 2020</span> 
    <span class="with-love">
        <i class="iconfont icon-love"></i>
    </span> 
    <span class="author" itemprop="copyrightHolder"><a href="https://beihai-chang.github.io">Beihai-Chang</a> |
    </span> 
    <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a></span>
</div>
</div>
</body>

</html>